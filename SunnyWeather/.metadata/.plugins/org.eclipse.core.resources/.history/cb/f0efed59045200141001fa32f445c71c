package com.ustcweather.amarishappilees.http;

import com.ustcweather.amarishappilees.weatherinfo.WeatherRelativeInfo;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;

public class DecodeJson {
	
	private JSONObject decodeObject = null;
	
	public DecodeJson() {
		
	}
	
	public DecodeJson(String json) {
		decodeObject = JSONObject.fromObject(json);
	}
	
	public WeatherRelativeInfo getJsonInfo() {
		
		if(decodeObject.getInt("error") != 0) {
			return null;
		}
		String status = decodeObject.getString("status");
		String date = decodeObject.getString("date");
		JSONArray results = decodeObject.getJSONArray("results");
		JSONObject results0 = results.getJSONObject(0);
		String currentCity = results0.getString("currentCity");
		String pm = results0.getString("pm25");
		
		WeatherRelativeInfo weatherReInfo = new WeatherRelativeInfo();
		weatherReInfo.setCurrentCity(currentCity);
		weatherReInfo.setDate(date);
		weatherReInfo.setPm(pm);
		
		return weatherReInfo;
	}
}
